## big kernel lock

这是内核锁遗迹之一，它可以锁定整个内核，确保没有处理器在核心态并行运行。该锁称为大内核锁（big kernel lock），通常用缩写表示，即BKL。使用lock_kernel可锁定整个内核，对应的解锁使用un-lock_kernel。BKL的一个特性是，它的锁深度也会进行计数。这意味着在内核已经锁定时，仍然可以调用lock_kernel。对应的解锁操作（unlock_kernel）必须调用同样的次数，以解锁内核，使其他处理器能够进入。尽管BKL在内核中仍然有1 000多处，但它已经是过时的概念，内核开发者废弃了对它的使用。因为从性能和可伸缩性的角度来看，BKL简直是个灾难。新的代码决不应该使用BKL，而应该采用上面描述的细粒度锁。尽管如此，BKL仍然会存在若干年才能最终消失。